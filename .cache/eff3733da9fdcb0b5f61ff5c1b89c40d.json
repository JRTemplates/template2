{"dependencies":[{"name":"./env.js","loc":{"line":13,"column":18}},{"name":"./util","loc":{"line":14,"column":16}}],"generated":{"js":"\n// thanks for angular && mootools for some concise&cross-platform  implemention\n// =====================================\n\n// The MIT License\n// Copyright (c) 2010-2014 Google, Inc. http://angularjs.org\n\n// ---\n// license: MIT-style license. http://mootools.net\n\n\nvar dom = module.exports;\nvar env = require(\"./env.js\");\nvar _ = require(\"./util\");\nvar tNode = document.createElement('div')\nvar addEvent, removeEvent;\nvar noop = function(){}\n\nvar namespaces = {\n  html: \"http://www.w3.org/1999/xhtml\",\n  svg: \"http://www.w3.org/2000/svg\"\n}\n\ndom.body = document.body;\n\ndom.doc = document;\n\n// camelCase\nfunction camelCase(str){\n  return (\"\" + str).replace(/-\\D/g, function(match){\n    return match.charAt(1).toUpperCase();\n  });\n}\n\n\ndom.tNode = tNode;\n\nif(tNode.addEventListener){\n  addEvent = function(node, type, fn) {\n    node.addEventListener(type, fn, false);\n  }\n  removeEvent = function(node, type, fn) {\n    node.removeEventListener(type, fn, false) \n  }\n}else{\n  addEvent = function(node, type, fn) {\n    node.attachEvent('on' + type, fn);\n  }\n  removeEvent = function(node, type, fn) {\n    node.detachEvent('on' + type, fn); \n  }\n}\n\n\ndom.msie = parseInt((/msie (\\d+)/.exec(navigator.userAgent.toLowerCase()) || [])[1]);\nif (isNaN(dom.msie)) {\n  dom.msie = parseInt((/trident\\/.*; rv:(\\d+)/.exec(navigator.userAgent.toLowerCase()) || [])[1]);\n}\n\ndom.find = function(sl){\n  if(document.querySelector) {\n    try{\n      return document.querySelector(sl);\n    }catch(e){\n\n    }\n  }\n  if(sl.indexOf('#')!==-1) return document.getElementById( sl.slice(1) );\n}\n\n\ndom.inject = function(node, refer, position){\n\n  position = position || 'bottom';\n  if(!node) return ;\n  if(Array.isArray(node)){\n    var tmp = node;\n    node = dom.fragment();\n    for(var i = 0,len = tmp.length; i < len ;i++){\n      node.appendChild(tmp[i])\n    }\n  }\n\n  var firstChild, next;\n  switch(position){\n    case 'bottom':\n      refer.appendChild( node );\n      break;\n    case 'top':\n      if( firstChild = refer.firstChild ){\n        refer.insertBefore( node, refer.firstChild );\n      }else{\n        refer.appendChild( node );\n      }\n      break;\n    case 'after':\n      if( next = refer.nextSibling ){\n        next.parentNode.insertBefore( node, next );\n      }else{\n        refer.parentNode.appendChild( node );\n      }\n      break;\n    case 'before':\n      refer.parentNode.insertBefore( node, refer );\n  }\n}\n\n\ndom.id = function(id){\n  return document.getElementById(id);\n}\n\n// createElement \ndom.create = function(type, ns, attrs){\n  if(ns === 'svg'){\n    if(!env.svg) throw Error('the env need svg support')\n    ns = namespaces.svg;\n  }\n  return !ns? document.createElement(type): document.createElementNS(ns, type);\n}\n\n// documentFragment\ndom.fragment = function(){\n  return document.createDocumentFragment();\n}\n\n\n\nvar specialAttr = {\n  'class': function(node, value){\n    ('className' in node && (node.namespaceURI === namespaces.html || !node.namespaceURI)) ?\n      node.className = (value || '') : node.setAttribute('class', value);\n  },\n  'for': function(node, value){\n    ('htmlFor' in node) ? node.htmlFor = value : node.setAttribute('for', value);\n  },\n  'style': function(node, value){\n    (node.style) ? node.style.cssText = value : node.setAttribute('style', value);\n  },\n  'value': function(node, value){\n    node.value = (value != null) ? value : '';\n  }\n}\n\n\n// attribute Setter & Getter\ndom.attr = function(node, name, value){\n  if (_.isBooleanAttr(name)) {\n    if (typeof value !== 'undefined') {\n      if (!!value) {\n        node[name] = true;\n        node.setAttribute(name, name);\n        // lt ie7 . the javascript checked setting is in valid\n        //http://bytes.com/topic/javascript/insights/799167-browser-quirk-dynamically-appended-checked-checkbox-does-not-appear-checked-ie\n        if(dom.msie && dom.msie <=7 ) node.defaultChecked = true\n      } else {\n        node[name] = false;\n        node.removeAttribute(name);\n      }\n    } else {\n      return (node[name] ||\n               (node.attributes.getNamedItem(name)|| noop).specified) ? name : undefined;\n    }\n  } else if (typeof (value) !== 'undefined') {\n    // if in specialAttr;\n    if(specialAttr[name]) specialAttr[name](node, value);\n    else if(value === null) node.removeAttribute(name)\n    else node.setAttribute(name, value);\n  } else if (node.getAttribute) {\n    // the extra argument \"2\" is to get the right thing for a.href in IE, see jQuery code\n    // some elements (e.g. Document) don't have get attribute, so return undefined\n    var ret = node.getAttribute(name, 2);\n    // normalize non-existing attributes to undefined (as jQuery)\n    return ret === null ? undefined : ret;\n  }\n}\n\n\ndom.on = function(node, type, handler){\n  var types = type.split(' ');\n  handler.real = function(ev){\n    var $event = new Event(ev);\n    $event.origin = node;\n    handler.call(node, $event);\n  }\n  types.forEach(function(type){\n    type = fixEventName(node, type);\n    addEvent(node, type, handler.real);\n  });\n}\ndom.off = function(node, type, handler){\n  var types = type.split(' ');\n  handler = handler.real || handler;\n  types.forEach(function(type){\n    type = fixEventName(node, type);\n    removeEvent(node, type, handler);\n  })\n}\n\n\ndom.text = (function (){\n  var map = {};\n  if (dom.msie && dom.msie < 9) {\n    map[1] = 'innerText';    \n    map[3] = 'nodeValue';    \n  } else {\n    map[1] = map[3] = 'textContent';\n  }\n  \n  return function (node, value) {\n    var textProp = map[node.nodeType];\n    if (value == null) {\n      return textProp ? node[textProp] : '';\n    }\n    node[textProp] = value;\n  }\n})();\n\n\ndom.html = function( node, html ){\n  if(typeof html === \"undefined\"){\n    return node.innerHTML;\n  }else{\n    node.innerHTML = html;\n  }\n}\n\ndom.replace = function(node, replaced){\n  if(replaced.parentNode) replaced.parentNode.replaceChild(node, replaced);\n}\n\ndom.remove = function(node){\n  if(node.parentNode) node.parentNode.removeChild(node);\n}\n\n// css Settle & Getter from angular\n// =================================\n// it isnt computed style \ndom.css = function(node, name, value){\n  if( _.typeOf(name) === \"object\" ){\n    for(var i in name){\n      if( name.hasOwnProperty(i) ){\n        dom.css( node, i, name[i] );\n      }\n    }\n    return;\n  }\n  if ( typeof value !== \"undefined\" ) {\n\n    name = camelCase(name);\n    if(name) node.style[name] = value;\n\n  } else {\n\n    var val;\n    if (dom.msie <= 8) {\n      // this is some IE specific weirdness that jQuery 1.6.4 does not sure why\n      val = node.currentStyle && node.currentStyle[name];\n      if (val === '') val = 'auto';\n    }\n    val = val || node.style[name];\n    if (dom.msie <= 8) {\n      val = val === '' ? undefined : val;\n    }\n    return  val;\n  }\n}\n\ndom.addClass = function(node, className){\n  var current = node.className || \"\";\n  if ((\" \" + current + \" \").indexOf(\" \" + className + \" \") === -1) {\n    node.className = current? ( current + \" \" + className ) : className;\n  }\n}\n\ndom.delClass = function(node, className){\n  var current = node.className || \"\";\n  node.className = (\" \" + current + \" \").replace(\" \" + className + \" \", \" \").trim();\n}\n\ndom.hasClass = function(node, className){\n  var current = node.className || \"\";\n  return (\" \" + current + \" \").indexOf(\" \" + className + \" \") !== -1;\n}\n\n\n\n// simple Event wrap\n\n//http://stackoverflow.com/questions/11068196/ie8-ie7-onchange-event-is-emited-only-after-repeated-selection\nfunction fixEventName(elem, name){\n  return (name === 'change'  &&  dom.msie < 9 && \n      (elem && elem.tagName && elem.tagName.toLowerCase()==='input' && \n        (elem.type === 'checkbox' || elem.type === 'radio')\n      )\n    )? 'click': name;\n}\n\nvar rMouseEvent = /^(?:click|dblclick|contextmenu|DOMMouseScroll|mouse(?:\\w+))$/\nvar doc = document;\ndoc = (!doc.compatMode || doc.compatMode === 'CSS1Compat') ? doc.documentElement : doc.body;\nfunction Event(ev){\n  ev = ev || window.event;\n  if(ev._fixed) return ev;\n  this.event = ev;\n  this.target = ev.target || ev.srcElement;\n\n  var type = this.type = ev.type;\n  var button = this.button = ev.button;\n\n  // if is mouse event patch pageX\n  if(rMouseEvent.test(type)){ //fix pageX\n    this.pageX = (ev.pageX != null) ? ev.pageX : ev.clientX + doc.scrollLeft;\n    this.pageY = (ev.pageX != null) ? ev.pageY : ev.clientY + doc.scrollTop;\n    if (type === 'mouseover' || type === 'mouseout'){// fix relatedTarget\n      var related = ev.relatedTarget || ev[(type === 'mouseover' ? 'from' : 'to') + 'Element'];\n      while (related && related.nodeType === 3) related = related.parentNode;\n      this.relatedTarget = related;\n    }\n  }\n  // if is mousescroll\n  if (type === 'DOMMouseScroll' || type === 'mousewheel'){\n    // ff ev.detail: 3    other ev.wheelDelta: -120\n    this.wheelDelta = (ev.wheelDelta) ? ev.wheelDelta / 120 : -(ev.detail || 0) / 3;\n  }\n  \n  // fix which\n  this.which = ev.which || ev.keyCode;\n  if( !this.which && button !== undefined){\n    // http://api.jquery.com/event.which/ use which\n    this.which = ( button & 1 ? 1 : ( button & 2 ? 3 : ( button & 4 ? 2 : 0 ) ) );\n  }\n  this._fixed = true;\n}\n\n_.extend(Event.prototype, {\n  immediateStop: _.isFalse,\n  stop: function(){\n    this.preventDefault().stopPropagation();\n  },\n  preventDefault: function(){\n    if (this.event.preventDefault) this.event.preventDefault();\n    else this.event.returnValue = false;\n    return this;\n  },\n  stopPropagation: function(){\n    if (this.event.stopPropagation) this.event.stopPropagation();\n    else this.event.cancelBubble = true;\n    return this;\n  },\n  stopImmediatePropagation: function(){\n    if(this.event.stopImmediatePropagation) this.event.stopImmediatePropagation();\n  }\n})\n\n\ndom.nextFrame = (function(){\n    var request = window.requestAnimationFrame ||\n                  window.webkitRequestAnimationFrame ||\n                  window.mozRequestAnimationFrame|| \n                  function(callback){\n                    setTimeout(callback, 16)\n                  }\n\n    var cancel = window.cancelAnimationFrame ||\n                 window.webkitCancelAnimationFrame ||\n                 window.mozCancelAnimationFrame ||\n                 window.webkitCancelRequestAnimationFrame ||\n                 function(tid){\n                    clearTimeout(tid)\n                 }\n  \n  return function(callback){\n    var id = request(callback);\n    return function(){ cancel(id); }\n  }\n})();\n\n// 3ks for angular's raf  service\nvar k\ndom.nextReflow = dom.msie? function(callback){\n  return dom.nextFrame(function(){\n    k = document.body.offsetWidth;\n    callback();\n  })\n}: dom.nextFrame;\n\n\n\n"},"hash":"203166b3eb86fde5c1b27421135f08c8"}